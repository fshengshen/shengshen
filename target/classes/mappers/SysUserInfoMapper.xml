<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!--
用户操作相关SQL Mapper
@author fyn
@date 2016-06-06
@source Generated by MySQL2Java
-->

<!-- 此命名空间必须和对应Mapper.java文件的命名空间一致 -->
<mapper namespace="com.fyn.sys.mapper.SysUserInfoMapper">

    <!-- 用户栏位列表 -->
    <resultMap id="rm" type="com.fyn.sys.beans.SysUserInfo">
        <result property="userId" jdbcType="INTEGER" column="user_id" />
        <result property="userUuid" jdbcType="VARCHAR" column="user_uuid" />
        <result property="userName" jdbcType="VARCHAR" column="user_name" />
        <result property="mobileNo" jdbcType="VARCHAR" column="mobile_no" />
        <result property="passwd" jdbcType="VARCHAR" column="passwd" />
        <result property="securityEmail" jdbcType="VARCHAR" column="security_email" />
        <result property="userType" jdbcType="VARCHAR" column="user_type" />
        <result property="headImg" jdbcType="VARCHAR" column="head_img" />
        <result property="nickName" jdbcType="VARCHAR" column="nick_name" />
        <result property="loginTime" jdbcType="VARCHAR" column="login_time" />
        <result property="regTime" jdbcType="VARCHAR" column="reg_time" />
        <result property="sex" jdbcType="VARCHAR" column="sex" />
        <result property="realName" jdbcType="VARCHAR" column="real_name" />
        <result property="birthday" jdbcType="VARCHAR" column="birthday" />
    </resultMap>

    <!-- 获取用户 -->
    <select id="getSysUserInfo" resultMap="rm" parameterType="com.fyn.sys.beans.SysUserInfo">
        SELECT *
          FROM sys_user_info
         WHERE user_id = #{userId}
    </select>

    <!-- 添加用户 -->
    <insert id="addSysUserInfo" parameterType="com.fyn.sys.beans.SysUserInfo">
        INSERT INTO sys_user_info(user_id,user_uuid,user_name,mobile_no,passwd,security_email,user_type,head_img,nick_name,login_time,reg_time,sex,real_name,birthday)
        VALUES (#{userId},#{userUuid},#{userName},#{mobileNo},#{passwd},#{securityEmail},#{userType},#{headImg},#{nickName},#{loginTime},#{regTime},#{sex},#{realName},#{birthday})
    </insert>

    <!-- 修改用户 -->
    <update id="editSysUserInfo" parameterType="com.fyn.sys.beans.SysUserInfo">
        UPDATE sys_user_info
           SET user_uuid=#{userUuid},
               user_name=#{userName},
               mobile_no=#{mobileNo},
               passwd=#{passwd},
               security_email=#{securityEmail},
               user_type=#{userType},
               head_img=#{headImg},
               nick_name=#{nickName},
               login_time=#{loginTime},
               reg_time=#{regTime},
               sex=#{sex},
               real_name=#{realName},
               birthday=#{birthday}
         WHERE user_id = #{userId}
    </update>

    <!-- 作废用户 -->
    <update id="delSysUserInfo" parameterType="com.fyn.sys.beans.SysUserInfo">
        UPDATE sys_user_info
            SET del_flag=1
         WHERE user_id = #{userId}
    </update>
    
    <select id="getOneByNameAndPasswd" parameterType="com.fyn.sys.beans.SysUserInfo" resultMap="rm">
    	SELECT *
          FROM sys_user_info
         WHERE user_name=#{userName}
         AND   passwd=#{passwd}
    </select>
    
    <select id="getSysUserInfoList" resultMap="rm">
        SELECT *
          FROM sys_user_info
    </select>
</mapper>
